---
layout:     post
title:      比特币与加密货币技术
subtitle:   加密货币简介
date:       2018-08-08
author:     LT
header-img: img/post-bg-hacker.jpg
catalog: true
tags:
    - cryptocurrency
    - cryptography
---


# Bitcoins and Cyptocurrency Technologies
###### reading notes by lingtao(LT) start from 2018-08-08 

## 第一章 密码学与加密货币简介
### Chapter 1 Introduction to Cryptography & Cryptocurrencies

货币（currency） 是需要一些方法去控制供应量和必需多种的安全属性去避免欺骗（控制货币发行量和类似真伪识别）

加密货币（cryptocurrencies）也需要使用安全措施阻止人们篡改系统状态(tamper with the state of the system),它的的特征之一是与法定货币不一样，它的安全规则只需要单单被技术所执行，并不需要依赖一个中心认证（去中心化）

> 加密货币对密码学的使用广而深，可以防止篡改系统等功能，在理解加密货币之前，我们需要先了解一些加密货币所依赖的密码学的基础知识。

### 1.1 哈希函数

> 特点很明显，哈希函数是一个数学意义上的函数，包含以下三个性质

1. 输入的数值可以是任意长度
2. 输出一个固定长度的结果，(常用)假定256bit。
3. 可以高效的计算，即给定输入，便可以在合理的时间内得到结果。

它有如下几个特性：

1. 碰撞抵抗(**collision-resistance**)：碰撞的意义是对于输入x != y 哈希值H(x) =H(y) ，所以碰撞抵抗就是说没有人能找到这样的x,y使得H(x) =H(y)。(只是计算条件有限的情况下，人力和时间成本找不到这样的）应用：消息摘要：是一个加密散列函数，包含由单向散列公式创建的一串数字。 消息摘要旨在保护数据或媒体的完整性，以检测消息任何部分的更改和更改。

2. 隐秘性(**hiding**):隐秘性的意义在于无法逆向推倒，是某种意义上的 **one-way-function**          or **trapdoor-function** ，攻击者无法从哈希之后的值反推出加密前的值。[应用：commitment]

3. 解题友好(**puzzle-friendliness**):对于任何你想要从哈希函数得到的输出值y，如果k是从一个高小熵分布(**high min-entropy distribution**)中选取的，不可能找到一个x，使H(k//x)=y小于2n，那么我们就说这个哈希函数H是解谜友好的。

#### **SHA-256** 

现在让我们来讨论一个特殊的哈希函数，在这次课程中会经常用到。现在存在着很多的哈希函数，但这有一个是比特币主要使用的，而且它相当的好用，它叫SHA-256。

我们要求的哈希函数能计算任何长度的输入值。fortunately，只要我们能够建立一个计算于固定长度输入值的哈希函数，这儿有一个通用的方法，能将它转换成能够计算任何长度输入值的哈希函数。这种方法叫Merkle-Damgard转换。SHA-256就是一个使用这种方法的常用哈希函数。在常用术语中，基础的固定长度免碰撞哈希函数叫做压缩函数。已经证明，如果基础压缩函数是免碰撞的，那么整体哈希函数都是免碰撞的。

Merkle-Damgard转换是相当简单的。压缩函数接受m长度的输入值，然后产生更短长度为n的输出值，可为任意大小的哈希函数输入值就被分割成长度为m-n的块。具体是这样工作的：将每一个块(m-n)连同前一个输出值块n一起放入压缩函数中，可以注意到，输入值的长度将变为(m-n)+n=m，这就是压缩函数的输入值长度。对于第一个块，没有以前块的输出值，我们就用一个初始化向量(IV)进行替代。这个号码重复使用于每一个哈希函数的命令，在实践中，你可以在一个标准文件中查看它。最后一个块的输出值就是你返回的结果。

SHA-256使用的是接受768位输入值，产生256位输出值的压缩函数，块的大小是256位。下图是SHA-256如何工作的解析图。

![SHA-256](/Users/nelsonpeng/lingtao13.github.io/content_image/bitcoin-1.1.jpg)

接下来讨论一下哈希指针(**hash pointer**) 以及哈希结构（**hash structure**）

#### 哈希指针

是在许多系统中我们都将讨论到的一种数据结构，哈希指针指示某些信息存储在何处，我们将这个指针与这些信息的密码学哈希值存储在一起。哈希指针不仅是一种检索信息的方法，同时它也是一种检查信息是否被修改过的方法。

![SHA-256](/Users/nelsonpeng/lingtao13.github.io/content_image/bitcoin-1.2.png)

>哈希指针是一个指向存储地点的指针，加上一个针对存储时信息的哈希值

我们可以用哈希指针搭建各种数据结构。我们可以简单的例举些使用指针的数据结构，例如我们熟悉的串联列表，或是二歧搜索树。核心思想是，要使用哈希指针而不是我们通常采用的指针。

#### 区块链

可以用哈希指针构建了一个串联列表，我们将这个数据结构称作区块链。在一个有一连串块的常规串联列表里，每一个块都包含有数据，以及一个指向上一个块的指针。在一个区块链中，前一个块的指针会被哈希指针代替。所以每一个块不仅能告诉我们前一个块的值在哪，同时它也包含该值的摘要，这允许我们去验证这个值是否被篡改过。我们存储列表的开头，这是一个指向最近数据块的常规哈希指针。

![SHA-256](/Users/nelsonpeng/lingtao13.github.io/content_image/bitcoin-1.3.png)

可以发现传递方向是相反的，后一个哈希块指向前一个哈希块，这样可以保证整个链的完整性，从任意一个可以往回查到初始节点的位置，这样就防止了数据被篡改。






